name: Daily Stock Analysis Report

# è¨­å®šåŸ·è¡Œè§¸ç™¼æ¢ä»¶
on:
  schedule:
    # å°åŒ—æ™‚é–“ 17:15 åŸ·è¡Œ (UTC 09:15)
    # å°è‚¡æ”¶ç›¤å¾Œ 2 å°æ™‚ï¼Œç¢ºä¿ Yahoo Finance æ•¸æ“šå·²ç©©å®š
    - cron: '15 9 * * 1-5'
  workflow_dispatch: # è®“ä½ å¯ä»¥éš¨æ™‚æ‰‹å‹•é»æ“ŠæŒ‰éˆ•åŸ·è¡Œæ¸¬è©¦

jobs:
  run-analysis:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ æª¢å‡ºç¨‹å¼ç¢¼
        uses: actions/checkout@v3

      - name: ğŸ è¨­å®š Python ç’°å¢ƒ
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: ğŸ“¦ å®‰è£ç›¸ä¾å¥—ä»¶
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      - name: ğŸ“Š åŸ·è¡Œç›£æ§åˆ†æç¨‹å¼
        env:
          # é€™è£¡é€£çµåˆ°ä½ åœ¨ Settings è¨­å®šçš„ Secret
          RESEND_API_KEY: ${{ secrets.RESEND_API_KEY }}
        run: python main.py
